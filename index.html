<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Nelle Kristoff — Art</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Cache-Control" content="no-store" />

<style>
:root{
  --bg:#EFE7DC;
  --ink:#2F2A26;
  --card:#FFFFFF;

  --shadow: 0 14px 50px rgba(0,0,0,.32);
  --inset: inset 0 0 28px rgba(0,0,0,.14);
  --radius:2px;

  /* A3 landscape ratio */
  --a3: 420 / 297;
  --a3ratio: calc(420 / 297);

  /* ===== LEPORELLO / SPACE ===== */
  --maxFilmH: 78vh;

  /* panel sizing (controls how many visible) */
  --panelW: clamp(180px, 42vw, 560px);
  --panelH: calc(var(--panelW) * (297 / 420));

  /* 3D camera: higher = more spacious */
  --persp: 2600px;

  /* 3D shaping */
  --angleStep: 18deg;       /* tilt per distance step */
  --maxAngle: 72deg;        /* clamp for far panels */
  --zStep: 70px;            /* depth falloff per distance */
  --xStep: 78%;             /* horizontal step as % of panelW (accordion feel) */

  /* zoom limits */
  --zoomMin: .65;
  --zoomMax: 2.2;
}

/* base */
html, body{ height:100%; }
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Arial,sans-serif;
  background:var(--bg);
  color:var(--ink);
  line-height:1.6;
  opacity:0;
  padding: clamp(14px, 3vw, 34px);
  box-sizing: border-box;
}
html.ready body{ animation:fadein 2.9s ease-in-out forwards; }
@keyframes fadein{ from{opacity:0;} to{opacity:1;} }
body.noscroll{ overflow:hidden; }

/* header */
header{
  text-align:center;
  padding: 18px 16px 8px;
}
.title-row{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:4px;
  position:relative;
  z-index:9999;
}
h1{
  font-weight:500;
  letter-spacing:3px;
  margin:0;
  font-size:29px;
  text-transform:uppercase;
}
.subtitle{
  margin:9px 0 0;
  opacity:.65;
  font-size:11px;
  letter-spacing:.4px;
}

/* burger */
.menu-btn{
  width:44px;
  height:44px;
  border:0;
  background:transparent;
  cursor:pointer;
  padding:10px;
  display:inline-flex;
  flex-direction:column;
  justify-content:center;
  gap:9px;
  z-index:9999;
}
.menu-btn span{
  display:block;
  width:100%;
  height:2px;
  background:var(--ink);
  border-radius:2px;
}

/* menu bar */
.menu{
  width:min(740px, 92vw);
  margin:14px auto 0;
  border-radius:14px;
  border:1px solid rgba(47,42,38,.16);
  background:rgba(239,231,220,.92);
  box-shadow: 0 14px 40px rgba(0,0,0,.10);
  backdrop-filter:blur(8px);
  display:none;
  padding:8px;
}
.menu.open{ display:flex; justify-content:center; gap:8px; flex-wrap:wrap; }
.menu a{
  display:inline-block;
  padding:10px 14px;
  text-decoration:none;
  color:var(--ink);
  font-size:19px;
  letter-spacing:.2px;
  opacity:1;
  border-radius:2px;
}
.menu a:hover{ background:rgba(47,42,38,.08); }

/* main */
main{
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:2px;
  padding-bottom: 12px;
}

/* ===== FILM / SPACE VIEWPORT ===== */
.film-main{
  width:min(96vw, 1400px);
  margin:auto;
  position:relative;
}

/* The “stage”: clips only the outside space, not your images (they stay inside by design) */
.space-viewport{
  width:100%;
  height: var(--maxFilmH);
  position:relative;
  border-radius: 14px;
  border: 1px solid rgba(47,42,38,.14);
  background: rgba(255,255,255,.18);
  box-shadow: 0 12px 44px rgba(0,0,0,.10);
  backdrop-filter: blur(8px);

  overflow:hidden;
  transform: perspective(var(--persp)) rotateX(7deg) rotateY(-2deg);

  /* We handle pan/zoom ourselves */
  touch-action: none;
  user-select: none;
}

/* inner curved cinema screen */
.screen{
  position:absolute;
  inset:0;
  border-radius:14px;
  transform-style:preserve-3d;

  /* base bend + dynamic phone tilt */
  transform:
    perspective(var(--persp))
    rotateX(calc(var(--baseRX, 7deg) + var(--tiltX, 0deg)))
    rotateY(calc(var(--baseRY, 0deg) + var(--tiltY, 0deg)));
  transition: transform 120ms ease-out;
  will-change: transform;
}

:root{ --baseRX: 7deg; --baseRY: 0deg;
}

  /* the bend */
  transform: perspective(var(--persp)) rotateX(7deg);
}

/* extra cinema shading: subtle vignette + edge rolloff */
.screen::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:14px;
  pointer-events:none;

  /* soft vignette + edge depth */
  background:
    radial-gradient(140% 90% at 50% 55%,
      rgba(255,255,255,.10) 0%,
      rgba(0,0,0,.08) 58%,
      rgba(0,0,0,.22) 100%);

  /* adds that “bent glass/screen” vibe */
  box-shadow:
    inset 0 10px 30px rgba(255,255,255,.10),
    inset 0 -18px 44px rgba(0,0,0,.16);
  mix-blend-mode: multiply;
  opacity:.75;
}

/* optional: slight highlight strip like a projection glare */
.screen::after{
  content:"";
  position:absolute;
  left:6%;
  right:6%;
  top:10%;
  height:18%;
  border-radius:999px;
  pointer-events:none;
  background: radial-gradient(closest-side,
    rgba(255,255,255,.14),
    rgba(255,255,255,0));
  opacity:.6;
  filter: blur(2px);
}

/* The zoomable + pannable space */
.space{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  transform-origin: 50% 50%;
  transform: translate3d(var(--panX, 0px), var(--panY, 0px), 0) scale(var(--zoom, 1));
  will-change: transform;
}

/* The leporello track (3D) */
.leporello{
  position:relative;
  width: 1px;  /* we position panels absolutely in 3D */
  height: 1px;
  transform-style: preserve-3d;
}

/* Panels */
.panel{
  position:absolute;
  width: var(--panelW);
  height: var(--panelH);
  left: calc(var(--panelW) * -0.5);
  top:  calc(var(--panelH) * -0.5);
  transform-style: preserve-3d;
  will-change: transform, opacity, filter;
  transition:
    transform 650ms cubic-bezier(.18,.9,.2,1),
    opacity   650ms cubic-bezier(.18,.9,.2,1),
    filter    650ms cubic-bezier(.18,.9,.2,1);
  cursor:pointer;
}

.print{
  width:100%;
  height:100%;
  background:var(--card);
  padding:clamp(12px, 2.2vw, 28px);
  box-sizing: border-box;
  border-radius:var(--radius);
  box-shadow:var(--inset), var(--shadow);
  overflow:hidden;
  position:relative;
  display:grid;
  place-items:center;
}
.print img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
}

/* noise inside print */
.noise{
  position:absolute;
  inset:0;
  background-image:url("images/noise.png");
  background-repeat:repeat;
  background-size:520px 520px;
  opacity:.13;
  mix-blend-mode:overlay;
  pointer-events:none;
  animation:noiseMove .18s steps(2) infinite;
}
@keyframes noiseMove{
  0%{ transform:translate(0,0); }
  25%{ transform:translate(-40px,25px); }
  50%{ transform:translate(-10px,-30px); }
  75%{ transform:translate(30px,10px); }
  100%{ transform:translate(0,0); }
}

/* Arrow bottom-right (flow button) */
.arrow-slot{
  position:absolute;
  right: 12px;
  bottom: 12px;
  z-index:50;
}
.film-arrow{
  width:52px;
  height:52px;
  border-radius:999px;
  border:1px solid rgba(47,42,38,.28);
  background:rgba(239,231,220,.78);
  backdrop-filter:blur(6px);
  display:grid;
  place-items:center;
  cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,.14);
  transition:transform .2s ease, background .2s ease;
  opacity:.96;
}
.film-arrow:hover{ background:rgba(239,231,220,.92); transform:scale(1.04); }
.film-arrow:active{ transform:scale(.98); }
.film-arrow svg{ width:18px; height:18px; }

/* Zoom hint top-left */
.hint{
  position:absolute;
  left:12px;
  top:12px;
  z-index:40;
  font-size:12px;
  opacity:.7;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid rgba(47,42,38,.16);
  background:rgba(239,231,220,.68);
  backdrop-filter: blur(6px);
}

/* info row under the viewport (like your original) */
.info-row{
  width:100%;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  justify-content:center;
  align-items:start;
  margin: 14px auto 0;
  padding-bottom: 10px;
}
.info{
  width:100%;
  border-radius:14px;
  border:1px solid rgba(47,42,38,.16);
  background:rgba(255,255,255,.42);
  backdrop-filter: blur(8px);
  padding:12px 14px;
  box-sizing:border-box;
}
.info-top{
  display:flex;
  align-items:baseline;
  gap:10px;
  white-space:nowrap;
}
.title{
  font-size:14px;
  letter-spacing:.2px;
  opacity:.88;
  margin:0;
}
.status{
  font-size:13px;
  opacity:.65;
  margin:0;
}
.actions{
  margin-top:10px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.inquire-btn,.collect-btn{
  padding:8px 14px;
  font-size:13px;
  border:1px solid #000;
  background:transparent;
  color:#000;
  text-decoration:none;
  border-radius:4px;
}
.inquire-btn:hover,.collect-btn:hover{ background:#000; color:#fff; }

/* lightbox */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  display:none;
  align-items:center;
  justify-content:center;
  cursor:zoom-out;
  z-index:2147483647;
  padding: clamp(14px, 3vw, 34px);
  box-sizing: border-box;
}
.lightbox.open{ display:flex; }

/* A3 landscape frame that scales to viewport */
.lightbox .print{
  cursor:auto;
  width: min(96vw, calc(92vh * var(--a3ratio)));
  aspect-ratio: var(--a3);
  height: auto;
  padding: clamp(14px, 3vw, 34px);
  box-sizing: border-box;
  border-radius: var(--radius);
  box-shadow: var(--inset), var(--shadow);
  background: var(--card);
  overflow:hidden;
  display:grid;
  place-items:center;
}
.lightbox .print img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
}

footer{
  text-align:center;
  padding: 18px 20px 22px;
  font-size:12.5px;
  opacity:.5;
}

/* mobile */
@media (max-width: 520px){
  :root{
    --panelW: 86vw;
    --maxFilmH: 72vh;
    --persp: 3200px; /* more spacious */
    --angleStep: 16deg;
    --zStep: 62px;
    --xStep: 74%;
  }
  .info-row{ grid-template-columns: 1fr; }
}

/* short screens */
@media (max-height: 650px){
  :root{ --maxFilmH: 68vh; }
}

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  html.ready body{ animation:none !important; }
  body{ opacity:1 !important; }
  .panel{ transition:none !important; }
  .noise{ animation:none !important; }
}
</style>
</head>

<body>
<header>
  <div class="title-row">
    <h1>Nelle Kristoff</h1>
    <button class="menu-btn" id="menuBtn" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>

  <div class="subtitle">Selected Works</div>

  <nav class="menu" id="menu" aria-label="Site menu">
    <a href="about.html">About</a>
    <a href="#" onclick="contact(event)">Contact</a>
    <a href="posts.html">Posts</a>
  </nav>
</header>

<main>
  <section class="film-main" aria-label="Leporello space gallery">

    <div class="space-viewport" id="viewport">
  <div class="screen" id="screen">
    <div class="hint">Drag to pan · Pinch/scroll to zoom · → button flows one-by-one</div>

    <div class="space" id="space">
      <div class="leporello" id="leporello"></div>
    </div>

    <div class="arrow-slot">
      <button class="film-arrow" id="arrowRight" aria-label="Next artwork">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 6l6 6-6 6"/>
        </svg>
      </button>
    </div>
  </div>
</div>

    <div class="info-row">
      <div class="info">
        <div class="info-top">
          <p class="title" id="workTitle">Untitled</p>
          <p class="status" id="workStatus">Unveiling soon</p>
        </div>
        <div class="actions">
          <a href="#" onclick="contact(event)" class="inquire-btn">Inquire</a>
          <a href="https://collect.nellekristoff.art" target="_blank" class="collect-btn" rel="noopener" id="collectBtn">Collect</a>
        </div>
      </div>

      <div class="info">
        <div class="info-top">
          <p class="title" id="zoomReadout">Zoom 100%</p>
          <p class="status" id="indexReadout">1 / 1</p>
        </div>
        <div class="actions">
          <a href="#" class="collect-btn" id="resetView">Reset view</a>
        </div>
      </div>
    </div>

    <!-- LIGHTBOX -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
      <div class="print" onclick="event.stopPropagation()">
        <img id="lightboxImg" alt="" />
        <div class="noise"></div>
      </div>
    </div>

  </section>
</main>

<footer>© 2026 Nelle Kristoff — All rights reserved</footer>

<script>
window.addEventListener("load", () => document.documentElement.classList.add("ready"));

/* Menu */
const menuBtn = document.getElementById('menuBtn');
const menu = document.getElementById('menu');
menuBtn.addEventListener('click', (e) => {
  e.stopPropagation();
  const open = menu.classList.toggle('open');
  menuBtn.setAttribute('aria-expanded', String(open));
});
document.addEventListener('click', () => {
  menu.classList.remove('open');
  menuBtn.setAttribute('aria-expanded', 'false');
});

/* Contact */
function contact(e){
  if (e) e.preventDefault();
  window.location.href = "mailto:nellekristoff@gmail.com";
}

/* Lightbox */
function openLightbox(src, titleText){
  const lightbox = document.getElementById('lightbox');
  const img = document.getElementById('lightboxImg');
  img.src = src;
  img.alt = titleText || "";
  lightbox.classList.add('open');
  document.body.classList.add('noscroll');
}
function closeLightbox(){
  const lightbox = document.getElementById('lightbox');
  lightbox.classList.remove('open');
  document.body.classList.remove('noscroll');
}
window.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') closeLightbox();
});

/* Works (your list) */
const works = [
  { src:"images/Untitled1.png", title:"Untitled 1", status:"Unveiling soon", collect:"https://collect.nellekristoff.art" },
  { src:"images/Untitled2.png", title:"Untitled 2", status:"Unveiling soon", collect:"https://collect.nellekristoff.art" },
  { src:"images/Untitled3.png", title:"Untitled 3", status:"Unveiling soon", collect:"https://collect.nellekristoff.art" },

  /* add many more here */
  // { src:"images/Untitled4.png", title:"Untitled 4", status:"Unveiling soon", collect:"https://collect.nellekristoff.art" },
];

/* preload */
works.forEach(w => { const i = new Image(); i.src = w.src; });

/* Build panels */
const lep = document.getElementById('leporello');
const panels = [];
works.forEach((w, i) => {
  const el = document.createElement('div');
  el.className = 'panel';
  el.tabIndex = 0;
  el.innerHTML = `
    <div class="print">
      <img src="${w.src}" alt="${w.title}">
      <div class="noise"></div>
    </div>
  `;
  el.addEventListener('click', () => openLightbox(w.src, w.title));
  el.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openLightbox(w.src, w.title); }
  });
  lep.appendChild(el);
  panels.push(el);
});

function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

/* Read CSS vars (we re-read on resize) */
function cssVar(name){
  return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
}
function numPx(v){ return parseFloat(String(v).replace('px','')) || 0; }
function numDeg(v){ return parseFloat(String(v).replace('deg','')) || 0; }
function num(v){ return parseFloat(v) || 0; }

let active = 0;
let animating = false;

/* View (pan/zoom) */
const viewport = document.getElementById('viewport');
const space = document.getElementById('space');

let zoom = 1;
let panX = 0;
let panY = 0;

/* zoom limits from CSS */
function zoomMin(){ return num(cssVar('--zoomMin')) || 0.65; }
function zoomMax(){ return num(cssVar('--zoomMax')) || 2.2; }

function applyView(){
  space.style.setProperty('--zoom', zoom);
  space.style.setProperty('--panX', panX + 'px');
  space.style.setProperty('--panY', panY + 'px');

  document.getElementById('zoomReadout').textContent = `Zoom ${Math.round(zoom*100)}%`;
}

let rafPending = false;

function applyViewRaf(){
  if (rafPending) return;
  rafPending = true;
  requestAnimationFrame(() => {
    rafPending = false;
    applyView();
  });
}

function updateInfo(){
  const w = works[active] || works[0];
  document.getElementById('workTitle').textContent = w ? w.title : 'Untitled';
  document.getElementById('workStatus').textContent = w ? w.status : '';
  document.getElementById('collectBtn').href = w ? w.collect : 'https://collect.nellekristoff.art';
  document.getElementById('indexReadout').textContent = `${active+1} / ${works.length}`;
}

/* 3D layout: leporello flow with depth + tilt */
function layout3D(){
  const panelW = numPx(cssVar('--panelW'));
  const angleStep = numDeg(cssVar('--angleStep'));
  const maxAngle  = numDeg(cssVar('--maxAngle'));
  const zStep     = numPx(cssVar('--zStep'));
  const xStepPct  = num(cssVar('--xStep')) / 100;  // e.g. 0.78
  const stepX     = panelW * xStepPct;

  panels.forEach((el, i) => {
    const d = i - active;               // distance from active
    const ad = Math.abs(d);

    const rot = clamp(-d * angleStep, -maxAngle, maxAngle);
    const x   = d * stepX;
    const z   = -ad * zStep;

    // opacity + filter falloff
    const op  = clamp(1 - ad * 0.12, 0.25, 1);
    const sat = clamp(1 - ad * 0.08, 0.72, 1);

    el.style.transform =
      `translate3d(${x}px, 0px, ${z}px) rotateY(${rot}deg)`;

    el.style.opacity = op;
    el.style.filter = `saturate(${sat}) contrast(${clamp(1 - ad*0.02, 0.92, 1)})`;
    el.style.pointerEvents = (op < 0.28) ? 'none' : 'auto';
  });

  updateInfo();
}

/* Flow (button -> next) */
function next(){
  if (animating || works.length < 2) return;
  animating = true;
  active = (active + 1) % works.length;
  layout3D();
  // allow the CSS transition to finish
  setTimeout(() => { animating = false; }, 680);
}
document.getElementById('arrowRight').addEventListener('click', (e) => {
  e.preventDefault();
  next();
});

/* Keyboard flow */
window.addEventListener('keydown', (e) => {
  const lbOpen = document.getElementById('lightbox').classList.contains('open');
  if (lbOpen) return;
  if (e.key === 'ArrowRight') next();
  if (e.key === 'ArrowLeft'){
    active = (active - 1 + works.length) % works.length;
    layout3D();
  }
});

/* ===== Pan + Zoom (desktop wheel + touch pinch) ===== */
let pointers = new Map();
let lastPan = null;
let pinchStart = null;

function setPointer(e){
  pointers.set(e.pointerId, { x: e.clientX, y: e.clientY });
}
function updatePointer(e){
  if (!pointers.has(e.pointerId)) return;
  pointers.set(e.pointerId, { x: e.clientX, y: e.clientY });
}
function getTwoPointers(){
  const arr = Array.from(pointers.values());
  if (arr.length < 2) return null;
  return [arr[0], arr[1]];
}
function dist(a,b){
  const dx = a.x - b.x, dy = a.y - b.y;
  return Math.hypot(dx, dy);
}
function mid(a,b){
  return { x: (a.x+b.x)/2, y:(a.y+b.y)/2 };
}
function zoomTo(newZoom, cx, cy){
  newZoom = clamp(newZoom, zoomMin(), zoomMax());
  const k = newZoom / zoom;
  panX = (panX - cx) * k + cx;
  panY = (panY - cy) * k + cy;
  zoom = newZoom;
}
function zoomAt(factor, cx, cy){
  const newZoom = clamp(zoom * factor, zoomMin(), zoomMax());
  const k = newZoom / zoom;
  panX = (panX - cx) * k + cx;
  panY = (panY - cy) * k + cy;
  zoom = newZoom;
  applyViewRaf();
}

/* Pointer events */
viewport.addEventListener('pointerdown', (e) => {
  viewport.setPointerCapture(e.pointerId);
  setPointer(e);

  if (pointers.size === 1){
    lastPan = { x: e.clientX, y: e.clientY };
    pinchStart = null;
  } else if (pointers.size === 2){
    const [p1, p2] = getTwoPointers();
    pinchStart = {
      d: dist(p1,p2),
      z: zoom,
      m: mid(p1,p2)
    };
    lastPan = null;
  }
});

viewport.addEventListener('pointermove', (e) => {
  if (!pointers.has(e.pointerId)) return;
  updatePointer(e);

  if (pointers.size === 1 && lastPan){
    const dx = e.clientX - lastPan.x;
    const dy = e.clientY - lastPan.y;
    panX += dx;
    panY += dy;
    lastPan = { x: e.clientX, y: e.clientY };
    applyViewRaf();
  }

  if (pointers.size >= 2){
    const two = getTwoPointers();
    if (!two) return;
    const [p1, p2] = two;

    const dNow = dist(p1,p2);
    const mNow = mid(p1,p2);

    if (!pinchStart){
      pinchStart = { d: dNow, z: zoom, m: mNow };
      return;
    }
    const rect = viewport.getBoundingClientRect();
    const cx = mNow.x - rect.left;
    const cy = mNow.y - rect.top;

    // absolute zoom: startZoom * (currentDistance / startDistance)
    const newZoom = pinchStart.z * (dNow / pinchStart.d);
    zoomTo(newZoom, cx, cy);

    const mdx = mNow.x - pinchStart.m.x;
    const mdy = mNow.y - pinchStart.m.y;

    panX += mdx / zoom;
    panY += mdy / zoom;

    pinchStart.m = mNow;

    applyViewRaf();
  }
});

function endPointer(e){
  pointers.delete(e.pointerId);
  if (pointers.size === 0){
    lastPan = null;
    pinchStart = null;
  }
  if (pointers.size === 1){
    // reset lastPan to remaining pointer
    const remaining = Array.from(pointers.values())[0];
    lastPan = remaining ? { x: remaining.x, y: remaining.y } : null;
    pinchStart = null;
  }
}
viewport.addEventListener('pointerup', endPointer);
viewport.addEventListener('pointercancel', endPointer);
viewport.addEventListener('pointerleave', () => { /* keep capture-based */ });

/* Wheel zoom (desktop/trackpad) */
viewport.addEventListener('wheel', (e) => {
  e.preventDefault();
  const rect = viewport.getBoundingClientRect();
  const cx = e.clientX - rect.left;
  const cy = e.clientY - rect.top;
  const delta = -e.deltaY;
  const factor = (delta > 0) ? 1.08 : 0.92;
  zoomAt(factor, cx, cy);
}, { passive:false });

/* Reset */
document.getElementById('resetView').addEventListener('click', (e) => {
  e.preventDefault();
  zoom = 1;
  panX = 0;
  panY = 0;
  applyView();
});

/* init */
applyView();
layout3D();

/* Keep layout correct on resize */
window.addEventListener('resize', () => {
  layout3D();
});
</script>
</body>
</html>